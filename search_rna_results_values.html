{% extends 'TriplexDB/base.html' %}

    <head>
        <title>RNA search results</title>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    </head>

{% block content %}
{% if result %}
	{% if transcript %}
   
    <div class="table-responsive mx-5">
		<h4>Results for triplexes involving {{ transcript }}</h4>
		<br/>
		<table class="table table-bordered table-hover table-lg display table-striped" id="results_table_rna" style="text-align: left; width: 100%">
		  <thead class="table-dark" style="background-color: red;">
		    <tr>
		      <th scope="col">RNA</th>
		      <th scope="col">Transcript ID</th>
		      <th scope="col">Transcript Triplex Start</th>
		      <th scope="col">Transcript Triplex End</th>
		      <th scope="col">REM</th>
		      <th scope="col">REM Triplex Start</th>
		      <th scope="col">REM Triplex End</th>
		      <th scope="col">Transcript Length</th>
		      <th scope="col">REM Length</th>
		      <th scope="col">Score</th>
		      <th scope="col">Bit Score</th>
		      <th scope="col">E Value</th>
		    </tr>
		  </thead>
		  <tbody class="table-group-divider">
		  	{% for rem, triplex in result.items %}
				<tr>
					<td>{{ triplex.transcriptgenesymbol }}</td>
					<td><strong><i>{{ triplex.transcriptid }}</i></strong></td>
					<td>{{ triplex.transcripttriplexstart }}</td>
					<td>{{ triplex.transcripttriplexend }}</td>
					<td>{{ rem }}</td>
					<td>{{ triplex.remtriplexstart }}</td>
					<td>{{ triplex.remtriplexend }}</td>
					<td>{{ triplex.transcriptlength }}</td>
					<td>{{ triplex.remlength }}</td>
					<td>{{ triplex.triplexalignerscore }}</td>
					<td>{{ triplex.triplexalignerbitscore }}</td>
					<!-- <td>{{ triplex.triplexalignere }}</td> -->
					
					<script>
						var evalue={{ triplex.triplexalignere }};
						var exp=evalue.toExponential();
						document.write("<td>" + exp + "</td>")
					</script>
				</tr>
			{% endfor %}
		    </tbody>
		</table>
		</div>

	{% elif rna_symbol %}
		<h4>Results for triplexes involving {{ rna_symbol }}</h4>
		<br/>
		<table class="table" id="results_table_transcript">
		  <thead>
		    <tr>
		      <th scope="col">RNA</th>
		      <th scope="col">Transcript ID</th>
		      <th scope="col">REM</th>
		      <th scope="col">Score</th>
		      <th scope="col">E</th>
		    </tr>
		  </thead>
		  <tbody>
		  	{% for triplex in result %}
				<tr>
					<td><i><strong>{{ rna_symbol }}</strong></i></td>
					<td>{{ triplex.transcriptid }}</td>
					<td>{{ triplex.remsymbols }}</td>
					<td>{{ triplex.triplexalignerscore }}</td>
					<script>
						var evalue={{ triplex.triplexalignere }};
						var exp=evalue.toExponential();
						document.write("<td>"+exp+"</td>")
					</script>
				</tr>
			{% endfor %}
		    </tbody>
		</table>
	{% endif %}
    {% else %}
    <h3>No hits for this transcript in Triplexicon!</h3>
    {% endif %}

{% endblock %}	
